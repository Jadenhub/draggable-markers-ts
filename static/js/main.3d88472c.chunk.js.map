{"version":3,"sources":["components/map.png","components/marker.png","components/layout.tsx","index.tsx"],"names":["module","exports","Layout","props","handleImgClick","e","markers","state","slice","push","key","length","toString","coordinate","nativeEvent","offsetY","markerSize","height","offsetX","width","setState","isDragging","handleDragStart","preventDefault","value","target","getAttribute","undefined","clientpos","x","clientX","y","clientY","handleDrag","targetKey","idx","findIndex","item","range","maxY","maxX","handleDragEnd","handleImgLoad","el","offsetWidth","offsetHeight","minY","minX","pins","this","map","marker","className","style","top","left","cursor","onMouseDown","onMouseUp","alt","data-value","src","icon","onMouseMove","onClick","onLoad","href","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3d88472c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/map.82481805.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbdJREFUeNq0V91tgzAQhiwAUgeA1z6FTlA6QegG7nul0glKJmgqdQCyAd2ATlDy1NdkgEplAvqd5AeE8J2N6UknJ/GdP9+/Ew7DELjQ1eN3jiXXXzNwpz83P+/Xne05oQ0wwGIsB3ABjhjRC7gmWVzi1wsYoEqDRg6OoQsUnAdYYIAS4FOwnB4AXjsBA7TE8hr4082c5bPAAKWk+QrWIXJ7No35xiB8CNajBFyKFltae6TyAZMVKZgS8JaR72FxLAFLCTWbMNCrsLwwevfQazhXZ4zy3pSl+J2APxjdXIox5zIp9jWzl9kk1xydpG40dqVELsCpRWtNfYB7g2ykBwRHitkT67jlYqwHhsnaktHtJGAuTlu62NSl2hOtMEgaqY7JorPFNDqNGkgiyH4i8fhy0plbWeTHVpdeYiFbuUynTh/uS0cYo1zKSa0A2psSbsM0A7J47wmsTE3H5umz1OVvAC19OtcSl1+kBLV9Zbo+g+5gbesNrMFbYXKNR6dYji7AqW57kTDBslWnEw48C/HuXfIhXPAXhnrubmbrGZc7/CdwrF2ecL14zYfAuJeriYsL13P+BBgALTvEvEuCOh4AAAAASUVORK5CYII=\"","import React from 'react';\r\nimport './layout.css';\r\nimport map from './map.png';\r\nimport icon from './marker.png';\r\n\r\ninterface LayoutState {\r\n  markers: {coordinate: number[], key: string}[],\r\n  clientpos:{x: number, y: number},\r\n  isDragging: boolean,\r\n  range: {\r\n      maxY: number,\r\n      maxX: number,\r\n      minY: number,\r\n      minX: number\r\n  },\r\n  target: string | undefined\r\n}\r\n\r\ninterface LayoutProps {\r\n  markerSize: {\r\n      height: number,\r\n      width: number\r\n  }\r\n}\r\n\r\nexport default class Layout extends React.Component<LayoutProps, LayoutState> {\r\n  constructor(props: LayoutProps){\r\n    super(props);\r\n    this.state = {\r\n      markers:[],\r\n      clientpos: {\r\n        x: 0,\r\n        y: 0\r\n      },\r\n      isDragging: false,\r\n      range:{\r\n          maxX:0,\r\n          maxY:0,\r\n          minY:0,\r\n          minX:0\r\n      },\r\n      target: undefined\r\n    }\r\n  }\r\n  \r\n  handleImgClick = (e: React.MouseEvent<HTMLImageElement, MouseEvent>) => {\r\n    const markers = this.state.markers.slice();\r\n    markers.push(\r\n      {\r\n        key : markers.length.toString(),\r\n        coordinate : [e.nativeEvent.offsetY - this.props.markerSize.height/2, e.nativeEvent.offsetX - this.props.markerSize.width/2]\r\n      }\r\n    );\r\n    this.setState({\r\n      markers: markers,\r\n      isDragging: false,\r\n    });\r\n  }\r\n  \r\n  handleDragStart = (e:React.MouseEvent<HTMLDivElement, MouseEvent>)=> {\r\n    e.preventDefault();\r\n    \r\n    const el = e.target as HTMLInputElement\r\n    const value: string | null = el.getAttribute('value')      \r\n    this.setState({\r\n      isDragging: true,\r\n      target: (value) ? value : undefined,\r\n      clientpos: {\r\n        x: e.clientX,\r\n        y: e.clientY\r\n      }\r\n    });\r\n  }\r\n  \r\n  handleDrag = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) =>{\r\n    if (this.state.isDragging) {\r\n      const markers = this.state.markers.slice();\r\n      const clientpos = this.state.clientpos;\r\n      const targetKey = this.state.target;\r\n      const idx = markers.findIndex((item)=>{\r\n        return item.key=== targetKey;\r\n      });\r\n      const coordinate = markers[idx].coordinate.slice();\r\n      coordinate[0] += e.clientY - clientpos.y;\r\n      coordinate[1] += e.clientX - clientpos.x;\r\n      if (coordinate[0] <= this.state.range.maxY && coordinate[0] >= 0\r\n        && coordinate[1] <= this.state.range.maxX && coordinate[1] >= 0) {\r\n        markers[idx].coordinate = coordinate;\r\n        this.setState({\r\n          markers: markers,\r\n          clientpos: {\r\n            y: e.clientY,\r\n            x: e.clientX\r\n          }\r\n        });\r\n      } else {\r\n        this.setState({\r\n          clientpos: {\r\n            y: e.clientY,\r\n            x: e.clientX,\r\n          },\r\n          isDragging: false,\r\n        });\r\n      }\r\n    };\r\n  }\r\n    \r\n  handleDragEnd = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    this.setState({\r\n      isDragging: false,\r\n    });\r\n  }\r\n  \r\n  handleImgLoad = ({target}: {target: EventTarget}) =>{\r\n    const el = target as HTMLElement;\r\n    this.setState({\r\n      range:{\r\n        maxX: el.offsetWidth - this.props.markerSize.width,\r\n        maxY: el.offsetHeight - this.props.markerSize.height,\r\n        minY: 0,\r\n        minX: 0\r\n      }\r\n    });\r\n  }\r\n  \r\n  render(){\r\n    const markers = this.state.markers;\r\n    const pins =  markers.map((marker, idx)=>{\r\n      return (\r\n        <div key={marker.key} className=\"map-marker\"\r\n          style={{\r\n            top: marker.coordinate[0] ,\r\n            left: marker.coordinate[1] ,\r\n            cursor: (this.state.isDragging)?'move': 'pointer',\r\n          }}\r\n          onMouseDown={(e:React.MouseEvent<HTMLDivElement, MouseEvent>)=>{this.handleDragStart(e);}}\r\n          onMouseUp={(e: React.MouseEvent<HTMLDivElement, MouseEvent>)=>{this.handleDragEnd(e);}}\r\n        >\r\n          <img alt='pin' data-value={marker.key} src={icon}/>\r\n        </div>\r\n      );\r\n    })\r\n\r\n    return (\r\n      <>\r\n        <h3 className='title'>React Draggable Component</h3>\r\n        <div className='layout'\r\n          onMouseMove={(e:React.MouseEvent<HTMLDivElement, MouseEvent>)=>{this.handleDrag(e);}} \r\n        >\r\n          <img src={map} alt='map' \r\n              onClick={(e: React.MouseEvent<HTMLImageElement, MouseEvent>)=>{this.handleImgClick(e);}} \r\n              onLoad={(e: React.SyntheticEvent<HTMLImageElement, Event>)=>{this.handleImgLoad(e);}}/>\r\n          <div>\r\n            {pins}\r\n          </div>\r\n        </div>\r\n        <b>Description:</b>\r\n        <div>1. Click add marker</div>\r\n        <div>2. Drag marker</div>\r\n        <a className=\"home\" href='/'>HOME</a>\r\n      </>\r\n    );\r\n  };\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Layout from './components/layout';\r\nimport './index.css';\r\n\r\nReactDOM.render(<Layout markerSize={{width:30, height:30}} />, document.getElementById('root'));"],"sourceRoot":""}